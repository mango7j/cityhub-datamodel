
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>How to use FIWARE Harmonised Data Models in your projects &#8212; cityhub  documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css?family=Quicksand:400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="_static/main.css">

  </head><body>
	<div>

	<nav class="navbar navbar-expand-lg">

		<a class="navbar-brand" href="#">
			<img src="_static/bi-cityhub03.png" height="50px">
		</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="#">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">About</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link active dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Open Data Hub
					</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="/datamodel">Data Model</a>
          	<a class="dropdown-item" href="/openapi">Open API</a>
          	<a class="dropdown-item" href="#">Data Portal</a>
					</div>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">Services</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">Cities</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">Publication</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">News</a>
				</li>
			</ul>
		</div>
	</nav>

</div>
	
	<div class="related" role="navigation" aria-label="related navigation">
		<h3>Data Model</h3>
		<p>Data Model page description here. Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...</p>
		<ul>
			<li class="right" style="margin-right: 10px">
				<a href="genindex.html" title="General Index"
					 accesskey="I">index</a></li>
			<li class="nav-item nav-item-0"><a href="index.html">cityhub  documentation</a> &#187;</li> 
		</ul>
	</div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-use-fiware-harmonised-data-models-in-your-projects">
<h1>How to use FIWARE Harmonised Data Models in your projects<a class="headerlink" href="#how-to-use-fiware-harmonised-data-models-in-your-projects" title="Permalink to this headline">¶</a></h1>
<p>This section aims to provide few simple guidelines for the adoption of FIWARE
Harmonised Data Models. Readers interested into modifying or creating new data
models should refer to <a class="reference external" href="guidelines">Data models guidelines</a>. This guide is
not exhaustive and does not aim to cover the specifics of each model, rather it
provides general usage tips valid for most of the existing models and for
expected models in the future.</p>
<p>Data Models have been defined in relation to the FIWARE reference data context
model (<a class="reference external" href="http://fiware.github.io/specifications/ngsiv2/stable/">NGSI v2</a>). While
this does not imply that they cannot be used outside of the NGSI context model,
it does however indicate that some of <a class="reference external" href="guidelines">design principles</a> have
been driven by that. This also implicitly means that Data Models will follow the
evolution of FIWARE platform,
<a class="reference external" href="https://www.etsi.org/deliver/etsi_gs/CIM/001_099/004/01.01.01_60/gs_CIM004v010101p.pdf">NGSI-LD</a>
mappings will be added to all existing Data Models in the medium term.</p>
<div class="section" id="general-principles">
<h2>General principles<a class="headerlink" href="#general-principles" title="Permalink to this headline">¶</a></h2>
<p>The general principle guiding your adoption should be: keep it simple.</p>
<ul class="simple">
<li><p><strong>Use only the parts of the Data Model your application really need.</strong> This
will help reducing the amount of information exchanged to the one you need
and not more than that. This may apply also just to a part of your
application. I.e. while you use in your Context Broker the whole Data Model,
to other services you may dispatch only the needed part.</p></li>
<li><p><strong>Use metadata only in case of need, and follow the assumptions provided in
the Data Model.</strong> For example, in case your application is leveraging the
default unit defined in a Data Model (e.g. meters), avoid attaching metadata
to annotate the unit. In case your application is using a different unit, do
annotate it, it will simplify data exchange with other systems in case of
need.</p></li>
<li><p><strong>Stick to the existing Data Models.</strong> Data Models are meant to be an effort
to facilitate interoperability within the community. If you change the
meaning or the data type attached to an attribute, this will break
interoperability. Of course it may be the case that the model is not
covering your scenario, or it contains errors. Open a ticket in the
repository, and let the community discuss on the issue!
<a class="reference external" href="guidelines">Contribute</a> to the evolution of the model! In doing so
please keep in mind the
<a class="reference external" href="guidelines">guidelines to create new data models</a>.</p></li>
<li><p><strong>While not generally advised, you can add additional attributes in your
specific application for the purpose of your application.</strong> Be aware that of
course this means that such attributes may not be correctly used by other
applications leveraging the same Data Model. We recommend, if the attribute
you want to add is of general adoption and not specific to your case, to
propose it to become officially part of the Data Model. You can open an
issue or a pull request for that.</p></li>
<li><p><strong>Data Models, in most of the cases, are NGSI v2 codification of existing
data models.</strong> You can find the references in each Data Model specification,
but for the sake of maintainability, on purpose we don’t report the full
specification. This means that to gather further details, you need to access
the original source. For example, for the location, we use GeoJSON. You can
find the exact semantics of GeoJSON schema in the related standard.</p></li>
<li><p>Be aware that <strong><a class="reference external" href="http://json-schema.org/">JSON Schemas</a> provided cover only
the so called <em>key-value</em> representation of NGSI v2 context data</strong>.</p></li>
<li><p>Be aware that at the time being <strong>none of the official FIWARE Core Enablers
enforce schema validation</strong>. Thus, in case you want to be sure your
application data validates correctly against a given Data Model, this is up
to you.</p></li>
</ul>
</div>
<div class="section" id="going-through-a-data-model">
<h2>Going through a Data Model<a class="headerlink" href="#going-through-a-data-model" title="Permalink to this headline">¶</a></h2>
<p>Each Data Model is programmatically defined using a
<a class="reference external" href="http://json-schema.org/">JSON Schema</a>, as previously mentioned, the JSON schema
covers only the so called <em>key-value</em> representation of NGSI v2 context data.
Thus the JSON Schema does not cover the <em>normalised</em> representation of context
data.</p>
<p>In the <a class="reference external" href="http://fiware.github.io/specifications/ngsiv2/stable/">NGSI v2</a>
normalised format each attribute (<code class="docutils literal notranslate"><span class="pre">key</span></code>) of the Data Model is represented by a
JSON object with the following syntax:</p>
<ul class="simple">
<li><p>The attribute value is specified by the <code class="docutils literal notranslate"><span class="pre">value</span></code> property, whose value may be
any JSON datatype.</p></li>
<li><p>The attribute NGSI type is specified by the <code class="docutils literal notranslate"><span class="pre">type</span></code> property, whose value is
a string containing the NGSI type.</p></li>
<li><p>The attribute metadata is specified by the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> property. Its value is
another JSON object which contains a property per metadata element defined
(the name of the property is the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the metadata element). Each
metadata element, in turn, is represented by a JSON object containing the
following properties:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: Its value contains the metadata value, which may correspond to
any JSON datatype.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: Its value contains a string representation of the metadata NGSI
type.</p></li>
</ul>
</li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;entityId&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;entityType&quot;</span><span class="p">,</span>
    <span class="nt">&quot;att1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;metada1&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;metavalue1&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the case of the key-value format (also known as <em>Simplified Entity
Representation</em> in the
<a class="reference external" href="http://fiware.github.io/specifications/ngsiv2/stable/">NGSI v2</a> specification),
values are directly mapped to the keys, and metadata are not covered:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;entityId&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;entityType&quot;</span><span class="p">,</span>
    <span class="nt">&quot;att1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Of course the normalised format contains richer information, but on the other
side it is redundant and less efficient in term of transport.</p>
<p>To clarify the difference among the two representation here is a complete
example from the <code class="docutils literal notranslate"><span class="pre">AirQualityObserved</span></code> Data Model:</p>
<ul class="simple">
<li><p>Normalised format:</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Madrid-AmbientObserved-28079004-2016-03-15T11:00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AirQualityObserved&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateObserved&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-03-15T11:00:00/2016-03-15T12:00:00&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;airQualityLevel&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;moderate&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;CO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;unitCode&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;GP&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">12.2</span>
    <span class="p">},</span>
    <span class="nt">&quot;NO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;unitCode&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;GQ&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;refPointOfInterest&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Relationship&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;28079004-Pza.deEspanya&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;windDirection&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">186</span>
    <span class="p">},</span>
    <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;http://datos.madrid.es&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;windSpeed&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.64</span>
    <span class="p">},</span>
    <span class="nt">&quot;SO2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;unitCode&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;GQ&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;NOx&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;unitCode&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;GQ&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geo:json&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
            <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">-3.712247222222222</span><span class="p">,</span> <span class="mf">40.423852777777775</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;airQualityIndex&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">65</span>
    <span class="p">},</span>
    <span class="nt">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;PostalAddress&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;addressCountry&quot;</span><span class="p">:</span> <span class="s2">&quot;ES&quot;</span><span class="p">,</span>
            <span class="nt">&quot;addressLocality&quot;</span><span class="p">:</span> <span class="s2">&quot;Madrid&quot;</span><span class="p">,</span>
            <span class="nt">&quot;streetAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;Plaza de Espa\u00f1a&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.7</span>
    <span class="p">},</span>
    <span class="nt">&quot;relativeHumidity&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.54</span>
    <span class="p">},</span>
    <span class="nt">&quot;precipitation&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">&quot;NO2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;unitCode&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;GQ&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;CO_Level&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;moderate&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>key-value format:</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Madrid-AmbientObserved-28079004-2016-03-15T11:00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AirQualityObserved&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;addressCountry&quot;</span><span class="p">:</span> <span class="s2">&quot;ES&quot;</span><span class="p">,</span>
        <span class="nt">&quot;addressLocality&quot;</span><span class="p">:</span> <span class="s2">&quot;Madrid&quot;</span><span class="p">,</span>
        <span class="nt">&quot;streetAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;Plaza de España&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;dateObserved&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-03-15T11:00:00/2016-03-15T12:00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">-3.712247222222222</span><span class="p">,</span> <span class="mf">40.423852777777775</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;http://datos.madrid.es&quot;</span><span class="p">,</span>
    <span class="nt">&quot;precipitation&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;relativeHumidity&quot;</span><span class="p">:</span> <span class="mf">0.54</span><span class="p">,</span>
    <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">12.2</span><span class="p">,</span>
    <span class="nt">&quot;windDirection&quot;</span><span class="p">:</span> <span class="mi">186</span><span class="p">,</span>
    <span class="nt">&quot;windSpeed&quot;</span><span class="p">:</span> <span class="mf">0.64</span><span class="p">,</span>
    <span class="nt">&quot;airQualityLevel&quot;</span><span class="p">:</span> <span class="s2">&quot;moderate&quot;</span><span class="p">,</span>
    <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="nt">&quot;CO&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="nt">&quot;NO&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
    <span class="nt">&quot;NO2&quot;</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span>
    <span class="nt">&quot;NOx&quot;</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
    <span class="nt">&quot;SO2&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="nt">&quot;CO_Level&quot;</span><span class="p">:</span> <span class="s2">&quot;good&quot;</span><span class="p">,</span>
    <span class="nt">&quot;NO_Level&quot;</span><span class="p">:</span> <span class="s2">&quot;moderate&quot;</span><span class="p">,</span>
    <span class="nt">&quot;refPointOfInterest&quot;</span><span class="p">:</span> <span class="s2">&quot;28079004-Pza. de España&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For each Data Model we provide a set of examples (in some cases also using the
Normalised representation of NGSI v2), such examples have been validated against
the respective JSON Schema and against a
<a class="reference external" href="https://fiware-orion.readthedocs.io/en/master/">Orion Context Broker</a> instance
(to ensure that also the content encoding is compliant with the reference
implementation).</p>
<p>As a consequence of the NGSI v2 specifications, all Data Models must include the
following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> : a unique identified of the entity modelled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> : The entity type, i.e. the type of Data Model, e.g. <code class="docutils literal notranslate"><span class="pre">Alert</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dateModified</span></code> : Last update timestamp of the entity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dateCreated</span></code> : The entity’s creation timestamp.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">dateCreated</span></code> and <code class="docutils literal notranslate"><span class="pre">dateModified</span></code> are special entity attributes provided
off-the-shelf by NGSI v2 implementations.</p>
<p>Most of the FIWARE Data Models adopt the
<a class="reference external" href="https://fiware.github.io/data-models/common-schema.json">GSMA common definitions</a>,
and so also include standard GSMA terminology such as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code>: An array of URIs or pointers to NGSI entities representing the
owner(s) of the entity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: A pointer (eventually an URI) to the service providing the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: A mnemonic name given to the entity as per
<a class="reference external" href="http://schema.org/name">schema.org</a> defined within the core context as <code class="docutils literal notranslate"><span class="pre">https://uri.etsi.org/ngsi-ld/name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alternateName</span></code>: An alternative mnemonic name given to the entity as per
<a class="reference external" href="http://schema.org/alternateName">schema.org</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: A textual description of the entity as per
<a class="reference external" href="http://schema.org/description">schema.org</a> defined within the core context as <code class="docutils literal notranslate"><span class="pre">https://uri.etsi.org/ngsi-ld/description</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataProvider</span></code>: A name identifying the entity providing the data.</p></li>
</ul>
<p>See for example the <a class="reference external" href="Building/Building/doc/spec"><code class="docutils literal notranslate"><span class="pre">Building</span></code> Data Model</a>.</p>
<p>Similarly most of the FIWARE Data Models adopt the
<a class="reference external" href="https://fiware.github.io/data-models/common-schema.json">Location common definitions</a>,
and thus include the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: the civic address of the entity as per
<a class="reference external" href="http://schema.org/address">schema.org</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code>: the <a class="reference external" href="https://tools.ietf.org/html/rfc7946">GeoJSON</a>
representation of the entity location.</p></li>
</ul>
<p>See for example the <a class="reference external" href="Building/Building/doc/spec"><code class="docutils literal notranslate"><span class="pre">Building</span></code> Data Model</a>.</p>
<p>GeoJSON supports the definition of quite complex geometries (<code class="docutils literal notranslate"><span class="pre">Point</span></code>,
<code class="docutils literal notranslate"><span class="pre">LineString</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygon</span></code>, <code class="docutils literal notranslate"><span class="pre">MultiPoint</span></code>, <code class="docutils literal notranslate"><span class="pre">MultiLineString</span></code>, and <code class="docutils literal notranslate"><span class="pre">MultiPolygon</span></code>)
representing the localisation of entities. Examples of GeoJSON geometries are
available <a class="reference external" href="https://tools.ietf.org/html/rfc7946#appendix-A">here</a>.</p>
</div>
<div class="section" id="general-tips">
<h2>General tips<a class="headerlink" href="#general-tips" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-specify-units-of-measurement">
<h3>How to specify units of measurement<a class="headerlink" href="#how-to-specify-units-of-measurement" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>If your data use the default unit defined in the Data Model, you don’t need
to specify any. It is implied.</p></li>
<li><p>Unless explicitly stated otherwise, all FIWARE data models use the metric
system of measurements by default. Regardless the model specification
include explicit reference to the scale adopted.</p></li>
<li><p>If your data use a different unit, you will need to use the <code class="docutils literal notranslate"><span class="pre">unitCode</span></code>
metadata annotation in your data (and you will need to adopt the normalised
representation). Code used should be the ones defined by
<a class="reference external" href="https://www.unece.org/fileadmin/DAM/cefact/recommendations/rec20/rec20_rev3_Annex3e.pdf">UN/CEFACT</a>.
E.g.:</p></li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;length&quot;: {
    &quot;value&quot;: 11,
    &quot;metadata&quot;: {
        &quot;unitCode&quot;: {
            &quot;value&quot;: &quot;FOT&quot;
        }
    }
}
</pre></div>
</div>
</div>
<div class="section" id="how-to-attach-specific-time-of-update-to-a-single-attribute">
<h3>How to attach specific time of update to a single attribute<a class="headerlink" href="#how-to-attach-specific-time-of-update-to-a-single-attribute" title="Permalink to this headline">¶</a></h3>
<p>Often, different attributes of the same entity are updated at different points
in time as the result of data aggregation across measurements from different
sensors. Note that the <code class="docutils literal notranslate"><span class="pre">dateModified</span></code> value only reflects only the point in time
the NGSI v2 implementation received an entity update, it does not correspond to
the moment in time at which an attribute changed. In order to be able to define
when a specific attribute changed you should you should use the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>
metadata annotation. E.g.:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;speed&quot;: {
    &quot;value&quot;: 11,
    &quot;metadata&quot;: {
        &quot;timestamp&quot;: {
            &quot;value&quot;: &quot;2016-03-15T11:00:00.000&quot;
        }
    }
}
</pre></div>
</div>
</div>
<div class="section" id="proper-usage-of-relations-among-data-models">
<h3>Proper usage of relations among Data Models<a class="headerlink" href="#proper-usage-of-relations-among-data-models" title="Permalink to this headline">¶</a></h3>
<p>With the introduction of
<a class="reference external" href="https://www.etsi.org/deliver/etsi_gs/CIM/001_099/004/01.01.01_60/gs_CIM004v010101p.pdf">NGSI-LD</a>,
a growing number attributes are being defined which represent relationships
between entities.</p>
<p>Previously the FIWARE data model defined the name of such attributes was normed
to be <code class="docutils literal notranslate"><span class="pre">ref</span></code> followed by the name of the Entity Type referenced by the attribute,
for example in the case of Entity Type <code class="docutils literal notranslate"><span class="pre">Device</span></code>, the full attribute would be
<code class="docutils literal notranslate"><span class="pre">refDevice</span></code>.</p>
<p>With the introduction of NGSI-LD, following the link with practises in the
ontologies, such attributes are defined with the usage of a verb (plus
optionally an object) such as <code class="docutils literal notranslate"><span class="pre">hasStop</span></code>, <code class="docutils literal notranslate"><span class="pre">operatedBy</span></code>, <code class="docutils literal notranslate"><span class="pre">hasTrip</span></code>, etc.</p>
<p>While in the first case, the entity type to be looked for is implicitly defined
by the attribute name, this is no longer the case with NGSI-LD, that’s why it is
important to use NGSI-LD <a class="reference external" href="https://tools.ietf.org/html/rfc8141">URNs</a> that convey
the type of the target entity, for instance <code class="docutils literal notranslate"><span class="pre">urn:ngsi-ld:gtfs:Stop:S123</span></code>.</p>
<p>Currently it is up to the logic of your application to include the logic to
navigate entity relationships, as it is not yet defined within implementations
of the NGSI v2 or NGSI-LD specification.</p>
</div>
</div>
<div class="section" id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Add paragraph <em>Validate your own examples</em></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to use FIWARE Harmonised Data Models in your projects</a><ul>
<li><a class="reference internal" href="#general-principles">General principles</a></li>
<li><a class="reference internal" href="#going-through-a-data-model">Going through a Data Model</a></li>
<li><a class="reference internal" href="#general-tips">General tips</a><ul>
<li><a class="reference internal" href="#how-to-specify-units-of-measurement">How to specify units of measurement</a></li>
<li><a class="reference internal" href="#how-to-attach-specific-time-of-update-to-a-single-attribute">How to attach specific time of update to a single attribute</a></li>
<li><a class="reference internal" href="#proper-usage-of-relations-among-data-models">Proper usage of relations among Data Models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo">TODO</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/howto.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, keti.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.0.
    </div>
  </body>
</html>